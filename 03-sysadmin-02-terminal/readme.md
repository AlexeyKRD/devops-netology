# Домашнее задание к занятию "3.2. Работа в терминале, лекция 2"

---
### 1. Какого типа команда cd?
> `cd` - встроенная команда в оболочку (`type cd`, выводит `cd is a shell builtin`), служит для перемещения по каталогам. А зачем нам какая-то программа для перемещения по оболочке, здесь необходим функционал управления самой оболочкой, поэтому она встроенная. инструмент встроенный т.к. это максимально необходимая вещь для shell. 
### 2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l?
> `grep <some_string> <some_file> -c` зачем такие сложности)), перенаправляем вывод `grep` в другую программу для подсчета строк (лишняя нагрузка), у `grep` есть ключ `-c` который сам считает кол-во совпадений).
### 3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?
> используем `pstree -p` либо `ps -p 1`, получаем дерево процессов где первой веткой (прородитель, корешок))) являеться `systemd`.
### 4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?
> `ls TEM 2> /dev/pts/2`, где: `ls TEM` читаем папку TEM, `2>` перенаправляем вывод ошибок (stderr), `/dev/pts/2` на 3 терминал (нумерация с 0).
### 5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.
> получится, `cat < temp.log > temp.out`, возможно в данном случае пернаправление ввода `<` необязательно, т.к. `cat temp.log` и так получает в stdin файл temp.log (на практике получилось).
### 6. Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?
> получиться, `echo "Hi, from pts/1 to tty1" > /dev/tty1`, да я вижу это сообщение в tty1. 
### 7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?
> `bash 5>&1` перенаправит 5 файловый дескриптор в stdout (1 дескриптор), как бы 5fd (промежуточный дескриптор) будет ссылкой на 1fd(stdout - дескриптор вывода), поэтому при выполнении `echo netology > /proc/$$/fd/5` на экран выводится `netology`     
### 8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty?
> получилось 
> + `bach 5>&1` 
> + `cat ggg 5>&1 1>&2 2>&5 | tee temp.log` 
### 9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?
> `/proc/$$/environ` - в этом файле содержится список переменных окружения для конкретного процесса. Оно может быть полезно для просмотра содержимого окружения, если вам надо, например, посмотреть, была ли установлена переменная окружения перед запуском программы.  
> Также можно воспользоваться командой `env` или `printenv`.
### 10. Используя man, опишите что доступно по адресам `/proc/<PID>/cmdline`, `/proc/<PID>/exe`
> `cmdline` - этот файл содержит полную командную строку для процесса `<PID>`.  
> `exe` - этот файл представляет собой символическую ссылку, содержащую фактическуq путь к выполняемой команде.
### 11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью `/proc/cpuinfo`.
> судя по `cat /proc/cpuinfo` это `sse4_2`
### 12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. Это можно подтвердить командой tty, которая упоминалась в лекции 3.2. Однако:  
### `vagrant@netology1:~$ ssh localhost 'tty'`  
### `not a tty`  
### Почитайте, почему так происходит, и как изменить поведение.  
> TTY не выделяется для удаленного сеанса, возможно необходимо использовать ключ `-t`, `ssh -t localhost 'tty'`.  
> `-t` - Переназначение псевдо-терминала. Это может быть использовано для произвольного выполнения программ базирующихся на выводе изображения на удаленной машине, что может быть очень полезно, например, при реализации возможностей меню. Несколько параметров -t заданных подряд переназначат терминал, даже если ssh не имеет локального терминала. 
### 13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.
> первое что пришлось сделать, это скачать `reptyr`, `sudo apt install reptyr`  
> после ничего не получалось, пока не отредактировал файл `echo "0" | sudo tee /proc/sys/kernel/yama/ptrace_scope`  
> далее вроде все затреслось)
> + `top` - запускаем так называемый диспечер задач)) переводим его в фоновый режим `Ctrl+Z`  
> + `screen` - запускаем оконный менеджер
> + `ps -a` - находим наш процесс `top` и его `PID`(2569)
> + `reptyr 2569` - переносим процесс `top` в `screen`
> + после отключаемся от сеанса `screen`, `Ctrl+a d`  
> + все теперь можно отключаться от `shh`, процесс будет крутиться в `screen`
> + после чтобы подключиться к `screen`, выполняем `screen -Dr`
### 14. `sudo echo string > /root/new_file` не даст выполнить перенаправление под обычным пользователем, так как перенаправлением занимается процесс shell'а, который запущен без `sudo` под вашим пользователем. Для решения данной проблемы можно использовать конструкцию `echo string | sudo tee /root/new_file`. Узнайте что делает команда `tee` и почему в отличие от `sudo echo` команда с `sudo tee` будет работать.
> Команда `tee` нужна для записи вывода любой команды в один или несколько файлов.  
> нам нужны права на запись в файл `sudo tee` а не на вывод `sudo echo`, поэтому так все и происходит))
