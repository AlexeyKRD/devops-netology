# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде

> Документоориентированная база данных. "Одна запись может содержать столько данных, сколько нужно, в любом типе данных (или типах) — ограничений нет. Внутри одного документа есть внутренняя структура, однако, она может отличаться от одного документа к другому." MongoDB.  

- Склады и автомобильные дороги для логистической компании

> Сетевые или Графовые базы данных - состоят из узлов и связей между ними. Узлы обозначают элементы в базе данных, а связи между ними определяют их отношения между собой. Из всех типов баз данных эта является лучшим вариантом в случаях, когда приоритетными являются различные взаимосвязи между данными. Neo4j, OrientDB.
  
- Генеалогические деревья

> Сетевые имеют иерархическую структуру, но в отличие от иерархических баз данных, где у одного узла может быть только один родительский узел, сетевой узел может иметь отношения с несколькими объектами.  

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

> Базы данных ключ-значение, данные не слишком сложные, а скорость является приоритетом. Redis.  

- Отношения клиент-покупка для интернет-магазина

> Реляционная база данных - база, где данные хранятся в формате таблиц, они строго структурированы и связаны друг с другом. В таблице есть строки и столбцы, каждая строка представляет отдельную запись, а столбец — поле с назначенным ей типом данных. В каждой ячейке информация записана по шаблону. MySQL.  

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)  

> CA - во всех узлах данные согласованы и обеспечена доступность, при этом она жертвует устойчивостью к распаду на секции.  
> PC/EL - Данная архитектура при разделении стремится оставаться консистентной, а в случае без сетевых разделений, фокусируется на скорости ответа, отводя консистентность на второй план  

- При сетевых сбоях, система может разделиться на 2 раздельных кластера  

> AP - не гарантируется целостность, но при этом выполнены условия доступности и устойчивости к распаду на секции.  
> PA/EL - высокая доступность (A) при разделении (P) системы иначе (E) высокая скорость ответа (L)

- Система может не прислать корректный ответ или сбросить соединение  

> CP - обеспечивает целостный результат и способна функционировать в условиях распада, но достигает этого в ущерб доступности  
> PA/EC - При наличии сетевого разделения системы ставка делается на доступность, а при отсутствии распределения – на консистентность

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
> Нет, они противоречат друг другу.  
> ACID (Atomicity — Атомарность, Consistency — Согласованность, Isolation — Изолированность, Durability — Надёжность) это стандартный набор свойств, которые гарантируют, надежность транзакции.  
> BASE (Basically Available - Базовая доступность, Soft State - Гибкое состояние, Eventualconsistency - Отложенная согласованность) BASE-хранилища обеспечивают менее строгий контроль: данные будут согласованы позднее, вероятнее всего, во время чтения, или всегда будут согласованы, но только для определенных фиксаций, обработанных последними.  

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/).  
Что это за система? Какие минусы выбора данной системы?

> Redis (remote dictionary server) это нереляционная резидентная СУБД с открытым исходным кодом, быстрое хранилище данных в виде пар «ключ — значение». Известен своей исключительной высокой производительностью, даже среди других key‑value хранилищ. Лёгок в освоении и использовании.
>
> Получается у Redis та и минусов нет) если его использовать как временное хранилище данных. Момент если на долгое время вылетит нода из кластера, и БД довольно большого размера, при возвращении ноды репликация будет проходить путем копирования всей БД на реплику, что приведет к загруженности сети и доступности мастера.  А если вылетели 2 ноды (как на слайде из лекции), время увеличится в двое. Это по видимому основной минус использования Redis.
